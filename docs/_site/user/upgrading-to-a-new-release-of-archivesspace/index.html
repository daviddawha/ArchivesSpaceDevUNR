<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Upgrading to a new release of ArchivesSpace - ArchivesSpace</title>
    <link rel="stylesheet" href="/archivesspace/assets/stylesheets/main.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" defer></script>
    <script src="/archivesspace/assets/javascripts/site.js" type="text/javascript" charset="utf-8" defer></script>
    <script src="/archivesspace/assets/javascripts/main.js" type="text/javascript" charset="utf-8" defer></script>
    <link rel="alternate" type="application/atom+xml" href="/blog.xml">
  </head>
  <body>
    <div class="wrapper">

      <header class="top">
  <div class="row topbar">
    <h1 id="logo" class="logo">
  <a href="http://archivesspace.org/" title="ArchivesSpace">ArchivesSpace</a>
</h1>

    <nav>
      <ul id="navigation" class="navigation">
        <li><a href="https://archivesspace.atlassian.net/wiki/display/ADC/ArchivesSpace">Wiki</a></li>
        <li><a href="http://docs.archivesspace.org">User Docs</a></li>
        <li class="toggle"><button type="button" id="toggle-menu" class="button--teal">Menu</button></li>
      </ul>
    </nav>
  </div>
</header>


      <div id="content" class="row">

        <div id="sidebar" class="sidebar">
  <div>
    <!-- <h2>Search</h2> -->
    <div class="searchbox">
      <form onsubmit='google_site_search()'>
        <input type="text" id="google-search" class="searchbox-input" label="Search the docs searchbox" placeholder="Search the docs" />
      </form>

      <script language="Javascript" type="text/javascript">
          function google_site_search()
            {
                var query = document.getElementById("google-search").value;
                  window.open("http://google.com/search?q=" + query
                  + "%20site:" + "http://archivesspace.github.io/archivesspace");
                  }
                </script>
    </div>
  </div>
  <section>
    <nav>
      <h2>Basic administration</h2>
      <ul>
        <li><a href="/archivesspace/user/getting-started-with-archivesspace/">Getting started with ArchivesSpace</a></li>
        <li><a href="/archivesspace/user/running-archivesspace-as-a-unix-daemon/">ArchivesSpace as a Unix daemon</a></li>
        <li><a href="/archivesspace/user/running-archivesspace-as-a-windows-service/">ArchivesSpace as a Windows Service</a></li>
        <li><a href="/archivesspace/user/backup-and-recovery/">Backup and Recovery</a></li>
        <li><a href="/archivesspace/user/re-creating-indexes/">Re-creating Indexes</a></li>
        <li><a href="/archivesspace/user/resetting-passwords/">Resetting Passwords</a></li>
        <li><a href="/archivesspace/user/upgrading-to-a-new-release-of-archivesspace/">Upgrading ArchivesSpace</a>
          <ul style="margin-left: 10px;">
            <li><a href="/archivesspace/user/upgrading-to-1.1.0/">Upgrading to 1.1.0</a></li>
            <li><a href="/archivesspace/user/upgrading-to-1.1.1/">Upgrading to 1.1.1</a></li>
            <li><a href="/archivesspace/user/upgrading-to-1.5.0/">Upgrading to 1.5.0</a></li>
            <li><a href="/archivesspace/user/what-is-the-new-functionality-related-to-containers-and-container-management-in-1.5.0/">Container Management in 1.5.0</a></li>
            <li><a href="/archivesspace/user/upgrading-to-2.1.0/">Upgrading to 2.1.0</a></li>
          </ul>
        </li>
      </ul>
      <h2>Architecture and components</h2>
      <ul>
        <li><a href="/archivesspace/user/archivesspace-architecture-and-components">Architecture Overview</a></li>
        <li><a href="/archivesspace/user/jsonmodel----a-validated-archivesspace-record/">JSONModel -- a validated ArchivesSpace record</a></li>
        <li><a href="/archivesspace/user/the-archivesspace-backend/">ArchivesSpace backend</a></li>
        <li><a href="/archivesspace/user/background-jobs/">Background Jobs</a></li>
        <li><a href="/archivesspace/user/working-with-the-archivesspace-api/">ArchivesSpace API</a></li>
        <li><a href="/archivesspace/user/search-indexing/">Search Indexing</a></li>
        <li><a href="/archivesspace/user/the-archivesspace-public-user-interface/">ArchivesSpace Public User Interface</a></li>
        <li><a href="/archivesspace/user/oai-pmh-interface/">OAI-PMH Interface</a></li>
      </ul>
      <h2>Customization and configuration</h2>
      <ul>
        <li><a href="/archivesspace/user/configuring-archivesspace/">Configuring ArchivesSpace</a></li>
        <li><a href="/archivesspace/user/configuring-ldap-authentication/">Configuring LDAP Authentication</a></li>
        <li><a href="/archivesspace/user/adding-support-for-additional-username-password-based-authentication-backends/">Other Authentication Backends</a></li>
        <li><a href="/archivesspace/user/archivesspace-plug-ins/">ArchivesSpace Plug-ins</a></li>
        <li><a href="/archivesspace/user/customizing-text-in-archivesspace/">Customizing Text in ArchivesSpace</a></li>
        <li><a href="/archivesspace/user/theming-archivesspace/">Theming ArchivesSpace</a></li>
        <li><a href="/archivesspace/user/managing-frontend-assets-with-bower/">Managing Frontend Assets with Bower</a></li>
      </ul>
      <h2>Provisioning and server configuration</h2>
      <ul>
        <li><a href="/archivesspace/user/running-archivesspace-with-load-balancing-and-multiple-tenants/">Load Balancing and Multiple Tenants</a></li>
        <li><a href="/archivesspace/user/serving-archivesspace-over-subdomains/">ArchivesSpace with Subdomains</a></li>
        <li><a href="/archivesspace/user/serving-archivesspace-user-facing-applications-over-https/">ArchivesSpace over HTTPS</a></li>
        <li><a href="/archivesspace/user/jmeter-test-group-template/">JMeter Test Group Template</a></li>
        <li><a href="/archivesspace/user/running-archivesspace-against-mysql/">Running ArchivesSpace Against MySQL</a></li>
        <li><a href="/archivesspace/user/application-monitoring-with-new-relic/">Application Monitoring with New Relic</a></li>
        <li><a href="/archivesspace/user/running-archivesspace-under-a-prefix/">ArchivesSpace under a Prefix</a></li>
        <li><a href="/archivesspace/user/running-archivesspace-with-external-solr/">ArchivesSpace with External Solr</a></li>
        <li><a href="/archivesspace/user/tuning-archivesspace/">Tuning ArchivesSpace</a></li>
      </ul>
      <h2>Information for developers and code contributors</h2>
      <ul>
        <li><a href="/archivesspace/user/archivesspace-build-system/">ArchivesSpace Build System</a></li>
        <li><a href="/archivesspace/user/building-an-archivesspace-release/">Building an ArchivesSpace Release</a></li>
        <li><a href="/archivesspace/user/public-test-suite/">Public Test Suite</a></li>
        <li><a href="/archivesspace/user/selenium-test-suite/">Selenium Test Suite</a></li>
        <li><a href="/archivesspace/user/using-supervisord-for-development/">Using supervisord for Development</a></li>
        <li><a href="/archivesspace/user/docker/">Docker</a></li>
        <li><a href="/archivesspace/user/reports/">Reports</a></li>
        <li><a href="https://archivesspace.atlassian.net/wiki/spaces/ADC/pages/16449553/Contributing">Contributing to ArchivesSpace</a>
          <ul style="margin-left: 10px;">
            <li><a href="/archivesspace/user/contributor-license-agreements/">Contributor License Agreements</a></li>
          </ul>
        </li>
        <li><a href="/archivesspace/api">The API</a></li>
        <li><a href="/archivesspace/doc">Ruby YARD Documentation</a></li>
        <li><div class="status-circle status">Status:</div>
          <a href="https://travis-ci.org/archivesspace/archivesspace">Travis CI Status</a>
        </li>
      </ul>
      <h2>Importing and exporting data in ArchivesSpace</h2>
      <ul>
        <li><a href="/archivesspace/user/accession-csv-import-template/">Accession CSV Import Template</a></li>
        <li><a href="/archivesspace/user/assessment-csv-import-template/">Assessment CSV Import Template</a></li>
        <li><a href="/archivesspace/user/digital-object-csv-import-template/">Digital Object CSV Import Template</a></li>
        <li><a href="/archivesspace/user/archivesspace-repository-ead-exporter/">ArchivesSpace Repository EAD Exporter</a></li>
        <li><a href="/archivesspace/user/archivesspace-xsl-stylesheets/">ArchivesSpace XSL Stylesheets</a></li>
      </ul>
      <h2>Migration tools and data mapping</h2>
      <ul>
        <li><a href="/archivesspace/user/migration-tools-and-data-mapping/">Migration Tools and Data Mapping</a>
          <ul style="margin-left: 10px;">
            <li><a href="/archivesspace/user/migrating-data-from-archivists-toolkit-to-archivesspace-using-the-migration-tool/">Archivists' Toolkit Migration Instructions</a></li>
            <li><a href="/archivesspace/user/migrating-data-from-archon-to-archivesspace-using-the-migration-tool/">Archon Migration Instructions</a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </section>
  <section>
    <h2>Contact</h2>
    <ul>
      <li><a href="https://twitter.com/archivesspace">Twitter</a></li>
      <li><a href="http://github.com/archivesspace/archivesspace">GitHub</a></li>
      <li><a href="mailto:ArchivesSpaceHome@lyrasis.org">Email</a></li>
    </ul>
  </section>
  <section>
    <h2>Contributing to this Documentation</h2>
    <p>The documentation files for this site are managed in the <a href="https://github.com/archivesspace/tech-docs">ArchivesSpace Technical Documentation Repository</a>.</p>
      <p>This documentation was based on the <a href="https://travis-ci.org">Travis CI</a> documentation. It uses <a href="https://github.com/jekyll/jekyll">Jekyll</a> and <a href="https://github.com/tripit/slate">Slate</a></p>
  </section>
</div><!-- /#sidebar -->


        <main id="main" class="main">
          
            <h1 class="title">Upgrading to a new release of ArchivesSpace</h2>
          
          <ul>
  <li><strong><a href="https://archivesspace.github.io/archivesspace/user/upgrading-to-1.1.0/">Special considerations when upgrading to v1.1.0</a></strong></li>
  <li><strong><a href="https://archivesspace.github.io/archivesspace/user/upgrading-to-1.1.1/">Special considerations when upgrading to v1.1.1</a></strong></li>
  <li><strong><a href="https://archivesspace.github.io/archivesspace/user/upgrading-to-1.5.0/">Special considerations when upgrading from v1.4.2 to 1.5.x (these considerations also apply when upgrading from 1.4.2 to any version through 2.0.1)</a></strong></li>
  <li><strong><a href="https://archivesspace.github.io/archivesspace/user/upgrading-to-2.1.0/">Special considerations when upgrading to 2.1.0</a></strong></li>
</ul>

<h2 id="create-a-backup-of-your-archivesspace-instance">Create a backup of your ArchivesSpace instance</h2>

<p>You should make sure you have a working backup of your ArchivesSpace
installation before attempting an upgrade.  Follow the steps
under the <a href="https://archivesspace.github.io/archivesspace/user/backup-and-recovery/">Backup and recovery section</a> to do this.</p>

<h2 id="unpack-the-new-version">Unpack the new version</h2>

<p>It’s a good idea to unpack a fresh copy of the version of
ArchivesSpace you are upgrading to.  This will ensure that you are
running the latest versions of all files.  In the examples below,
replace the lower case x with the version number updating to. For example,
1.5.2 or 1.5.3.</p>

<p>For example, on Mac OS X or Linux:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ mkdir archivesspace-1.5.x
 $ cd archivesspace-1.5.x
 $ curl -LJO https://github.com/archivesspace/archivesspace/releases/download/v1.5.x/archivesspace-v1.5.x.zip
 $ unzip -x archivesspace-v1.5.x.zip
</code></pre></div></div>

<p>( The curl step is optional and simply downloads the distribution from github. You can also
 simply download the zip file in your browser and copy it to the directory )</p>

<p>On Windows, you can do the same by extracting ArchivesSpace into a new
folder you create in Windows Explorer.</p>

<h2 id="shut-down-your-archivesspace-instance">Shut down your ArchivesSpace instance</h2>

<p>To ensure you get a consistent copy, you will need to shut down your
running ArchivesSpace instance now.</p>

<h2 id="copy-your-configuration-and-data-files">Copy your configuration and data files</h2>

<p>You will need to bring across the following files and directories from
your original ArchivesSpace installation:</p>

<ul>
  <li>the <code class="highlighter-rouge">data</code> directory</li>
  <li>the <code class="highlighter-rouge">config</code> directory (see <strong>Configuration note</strong> below)</li>
  <li>your <code class="highlighter-rouge">lib/mysql-connector*.jar</code> file (if using MySQL)</li>
  <li>any plugins and local modifications you have installed in your <code class="highlighter-rouge">plugins</code> directory</li>
</ul>

<p>For example, on Mac OS X or Linux:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ cd archivesspace-1.5.x/archivesspace
 $ cp -a /path/to/archivesspace-1.4.2/archivesspace/data/* data/
 $ cp -a /path/to/archivesspace-1.4.2/archivesspace/config/* config/
 $ cp -a /path/to/archivesspace-1.4.2/archivesspace/lib/mysql-connector* lib/
 $ cp -a /path/to/archivesspace-1.4.2/archivesspace/plugins/local plugins/
 $ cp -a /path/to/archivesspace-1.4.2/archivesspace/plugins/wonderful_plugin plugins/
</code></pre></div></div>

<p>Or on Windows:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ cd archivesspace-1.5.x\archivesspace
 $ xcopy \path\to\archivesspace-1.4.2\archivesspace\data\* data /i /k /h /s /e /o /x /y
 $ xcopy \path\to\archivesspace-1.4.2\archivesspace\config\* config /i /k /h /s /e /o /x /y
 $ xcopy \path\to\archivesspace-1.4.2\archivesspace\lib\mysql-connector* lib /i /k /h /s /e /o /x /y
 $ xcopy \path\to\archivesspace-1.4.2\archivesspace\plugins\local plugins\local /i /k /h /s /e /o /x /y
 $ xcopy \path\to\archivesspace-1.4.2\archivesspace\plugins\wonderful_plugin plugins\wonderful_plugin /i /k /h /s /e /o /x /y
</code></pre></div></div>

<p>Note that you may want to preserve the logs file (<code class="highlighter-rouge">logs/archivesspace.out</code>
by default) from your previous installation–just in case you need to
refer to it later.</p>

<h3 id="configuration-note">Configuration note</h3>

<p>Sometimes a new release of ArchivesSpace will introduce new
configuration settings that weren’t present in previous releases.
Before you replace the distribution <code class="highlighter-rouge">config/config.rb</code> with your
original version, it’s a good idea to review the distribution version
to see if there are any new configuration settings of interest.</p>

<p>Upgrade notes will generally draw attention to any configuration
settings you need to set explicitly, but you never know when you’ll
discover a new, exciting feature!  Documentation might also refer to
uncommenting configuration options that won’t be in your file if you
keep your older version.</p>

<h2 id="transfer-your-locales-data">Transfer your locales data</h2>

<p>If you’ve made modifications to you locales file ( en.yml ) with customized
labels, titles, tooltips, etc., you’ll need to transfer those to your new
locale file.</p>

<p>A good way to do this is to use a Diff tool, like Notepad++, TextMate, or just
Linux diff command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ diff /path/to/archivesspace-1.4.2/locales/en.yml /path/to/archivesspace-1.5.x/archivesspace/locales/en.yml
 $ diff /path/to/archivesspace-1.4.2/locales/enums/en.yml /path/to/archivesspace-v1.5.x/archivesspace/locales/enums/en.yml
</code></pre></div></div>

<p>This will show you the differences in your current locales files, as well as the
new additions in the new version locales files. Simply copy the values you wish
to keep from your old ArchivesSpace locales to your new ArchivesSpace locales
files.</p>

<h2 id="run-the-database-migrations">Run the database migrations</h2>

<p>With everything copied, the final step is to run the database
migrations.  This will apply any schema changes and data migrations
that need to happen as a part of the upgrade.  To do this, use the
<code class="highlighter-rouge">setup-database</code> script for your platform. For example, on Mac OS X
or Linux:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ cd archivesspace-1.5.x/archivesspace
 $ scripts/setup-database.sh
</code></pre></div></div>

<p>Or on Windows:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ cd archivesspace-1.5.x\archivesspace
 $ scripts\setup-database.bat
</code></pre></div></div>

<h2 id="if-youre-using-external-solr">If you’re using external Solr</h2>

<p>It’s recommeneded you check your version against the version included with
ArchivesSpace:</p>

<p>https://github.com/archivesspace/archivesspace/blob/v1.5.x/build/build.xml#L9</p>

<p>If your version is older than the one provided by ArchivesSpace you may want to
consider upgrading.</p>

<p>Also you should check <code class="highlighter-rouge">schema.xml</code> and <code class="highlighter-rouge">solrconfig.xml</code> for changes and update
them if necessary (this is required for proper functionality).</p>

<p>https://github.com/archivesspace/archivesspace/tree/v1.5.x/solr</p>

<h2 id="if-youve-deployed-to-tomcat">If you’ve deployed to Tomcat</h2>

<p>The steps to deploy to Tomcat are esentially the same as in the
<a href="https://github.com/archivesspace-labs/archivesspace_tomcat">archivesspace_tomcat</a></p>

<p>But, prior to running your setup-tomcat script, you’ll need to be sure to clean out the
any libraries from the previous ASpace version from your Tomcat classpath.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 1. Stop Tomcat
 2. Unpack your new version of ArchivesSpace
 3. Configure your MySQL database in the config.rb ( just like in the
    install instructions )
 4. Make sure all you other local configuration settings are in your
    config.rb file ( check your Tomcat conf/config.rb file for your current
    settings. )
 5. Make sure you MySQL connector jar in the lib directory
 6. Run your setup-database script to migration your database.
 7. Delete all ASpace related jar libraries in your Tomcat's lib directory. These
    will include the "gems" folder, as well as "common.jar" and some
    [others](https://github.com/archivesspace/archivesspace/tree/master/common/lib).
    This will make sure your running the correct version of the dependent
    libraries for your new ASpace version.
    Just be sure not to delete any of the Apache Tomcat libraries.
 8. Run your setup-tomcat script ( just like in the install instructions ).
    This will copy all the files over to Tomcat.
 9. Start Tomcat
</code></pre></div></div>

<h2 id="thats-it">That’s it!</h2>

<p>You can now start your new ArchivesSpace version as normal.</p>

        </main>
      </div><!-- /#content -->

      <footer>
  <div class="row">
  </div>
</footer>

    </div><!-- /.wrapper -->
  </body>
</html>
